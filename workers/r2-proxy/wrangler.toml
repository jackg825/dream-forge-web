name = "dream-forge-r2-proxy"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# R2 Bucket 綁定
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "dream-forge-storage"

# KV Namespace 綁定 (用於 Rate Limiting)
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "dd79edcaa1a6498884e9800191f4aa22"

# 環境變數
[vars]
ALLOWED_ORIGINS = "https://dreamforge.app,https://www.dreamforge.app,https://dreamforge-66998.web.app,http://localhost:3000,http://localhost:5173"
FIREBASE_PROJECT_ID = "dreamforge-66998"

# 生產環境設定
[env.production]
name = "dream-forge-r2-proxy"

[[env.production.r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "dream-forge-storage"

[[env.production.kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "dd79edcaa1a6498884e9800191f4aa22"

[env.production.vars]
ALLOWED_ORIGINS = "https://dreamforge.app,https://www.dreamforge.app,https://dreamforge-66998.web.app,http://localhost:3000,http://localhost:5173"
FIREBASE_PROJECT_ID = "dreamforge-66998"

# 開發環境設定
[env.development]
name = "dream-forge-r2-proxy-dev"
